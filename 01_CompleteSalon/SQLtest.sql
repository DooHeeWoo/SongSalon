CREATE TABLE CUSTOMER (
CST_ID VARCHAR(15) PRIMARY KEY,
CST_NAME VARCHAR(20) NOT NULL,
CST_PW VARCHAR(15) NOT NULL,
CST_NUM VARCHAR(20) NOT NULL);		

CREATE TABLE DATES (
M_D VARCHAR(10) PRIMARY KEY);

CREATE TABLE MANAGER (
MNG_ID VARCHAR(15) PRIMARY KEY,
MNG_PW VARCHAR(15) NOT NULL,
MNG_ONUM VARCHAR(20) NOT NULL,
MNG_OWN VARCHAR(20) NOT NULL,
MNG_BRN VARCHAR(20) NOT NULL);

CREATE TABLE PRICE (
PR_PST VARCHAR(15) PRIMARY KEY,
PR_ADD NUMBER(10) NOT NULL);

CREATE TABLE SERVICE (
SV_NAME VARCHAR(20) PRIMARY KEY,
SV_PRICE NUMBER(10) NOT NULL,
SV_TIME NUMBER(5) NOT NULL);

CREATE TABLE TIMES ( H_TIME VARCHAR(10) PRIMARY KEY);

CREATE TABLE DESIGNER (
DGR_CODE VARCHAR(15) PRIMARY KEY,
DGR_NAME VARCHAR(20) NOT NULL,
DGR_CAR NUMBER(5) NOT NULL,
DGR_PST VARCHAR(15) NOT NULL,
CONSTRAINT DGR_PST_FK FOREIGN KEY (DGR_PST) REFERENCES PRICE(PR_PST));

CREATE TABLE RESERVATION (
RSV_NUM NUMBER(10) PRIMARY KEY,
RSV_DATE VARCHAR(10) NOT NULL,
RSV_GEN VARCHAR(5) NOT NULL,
RSV_COST NUMBER(10) NOT NULL,
RSV_CST_ID VARCHAR(15) NOT NULL,
RSV_SV_NAME VARCHAR(20) NOT NULL,
RSV_SCH_CODE VARCHAR(10) NOT NULL,
CONSTRAINT RSV_CST_ID_FK FOREIGN KEY(RSV_CST_ID) REFERENCES CUSTOMER(CST_ID),
CONSTRAINT RSV_SV_NAME_FK FOREIGN KEY(RSV_SV_NAME) REFERENCES SERVICE(SV_NAME),
CONSTRAINT RSV_SCH_CODE_FK FOREIGN KEY(RSV_SCH_CODE) REFERENCES SCHEDULE(SCH_CODE));

CREATE TABLE SCHEDULE (
SCH_CODE VARCHAR(10) PRIMARY KEY,
SCH_DCODE VARCHAR(15) NOT NULL,
SCH_TIME VARCHAR(10) NOT NULL,
SCH_DATE VARCHAR(10) NOT NULL,
CONSTRAINT SCH_DCODE_FK FOREIGN KEY(SCH_DCODE) REFERENCES DESIGNER(DGR_CODE),
CONSTRAINT SCH_TIME_FK FOREIGN KEY(SCH_TIME) REFERENCES TIMES(H_TIME),
CONSTRAINT SCH_DATE_FK FOREIGN KEY(SCH_DATE) REFERENCES DATES(M_D));

INSERT INTO DATES VALUES ('0701'); 
INSERT INTO DATES VALUES ('0702');
INSERT INTO DATES VALUES ('0703');
INSERT INTO DATES VALUES ('0704');
INSERT INTO DATES VALUES ('0705');
INSERT INTO DATES VALUES ('0706');
INSERT INTO DATES VALUES ('0707');
INSERT INTO DATES VALUES ('0708');
INSERT INTO DATES VALUES ('0709');
INSERT INTO DATES VALUES ('0710');
INSERT INTO DATES VALUES ('0711');
INSERT INTO DATES VALUES ('0712');
INSERT INTO DATES VALUES ('0713');
INSERT INTO DATES VALUES ('0714');
INSERT INTO DATES VALUES ('0715');
INSERT INTO DATES VALUES ('0716');
INSERT INTO DATES VALUES ('0717');
INSERT INTO DATES VALUES ('0718');
INSERT INTO DATES VALUES ('0719');
INSERT INTO DATES VALUES ('0720');
INSERT INTO DATES VALUES ('0721');
INSERT INTO DATES VALUES ('0722');
INSERT INTO DATES VALUES ('0723');
INSERT INTO DATES VALUES ('0724');
INSERT INTO DATES VALUES ('0725');
INSERT INTO DATES VALUES ('0726');
INSERT INTO DATES VALUES ('0727');
INSERT INTO DATES VALUES ('0728');
INSERT INTO DATES VALUES ('0729');
INSERT INTO DATES VALUES ('0730');
INSERT INTO DATES VALUES ('0731');

INSERT INTO TIMES VALUES ('09:00');
INSERT INTO TIMES VALUES ('10:00');
INSERT INTO TIMES VALUES ('11:00');
INSERT INTO TIMES VALUES ('12:00');
INSERT INTO TIMES VALUES ('13:00');
INSERT INTO TIMES VALUES ('14:00');
INSERT INTO TIMES VALUES ('15:00');
INSERT INTO TIMES VALUES ('16:00');
INSERT INTO TIMES VALUES ('17:00');
INSERT INTO TIMES VALUES ('18:00');
INSERT INTO TIMES VALUES ('19:00');

INSERT INTO SERVICE VALUES('남성컷',10000,1);
INSERT INTO SERVICE VALUES('남성펌',40000,2);
INSERT INTO SERVICE VALUES('남성매직',40000,2);
INSERT INTO SERVICE VALUES('남성셋팅',50000,2);
INSERT INTO SERVICE VALUES('남성염색',40000,2);
INSERT INTO SERVICE VALUES('남성매직셋팅',60000,3);
INSERT INTO SERVICE VALUES('여성컷',20000,1);
INSERT INTO SERVICE VALUES('여성펌',50000,2);
INSERT INTO SERVICE VALUES('여성매직',50000,2);
INSERT INTO SERVICE VALUES('여성셋팅',70000,2);
INSERT INTO SERVICE VALUES('여성매직셋팅',90000,3);
INSERT INTO SERVICE VALUES('여성염색',50000,2);



//디자이너 스케줄 테이블 테스트
CREATE TABLE DH_SCH_TEST (
SCH_CODE VARCHAR(10) PRIMARY KEY,
SCH_DCODE VARCHAR(15) NOT NULL,
SCH_TIME VARCHAR(10) NOT NULL,
SCH_DATE VARCHAR(10) NOT NULL);

insert into DH_SCH_TEST values('6','S_03', '10:00', '0725');
insert into DH_SCH_TEST values('7','S_03', '11:00', '0725');
insert into DH_SCH_TEST values('8','S_01', '10:00', '0725');
insert into DH_SCH_TEST values('9','S_02', '10:00', '0725');
insert into DH_SCH_TEST values('10','S_01', '11:00', '0725');

insert into DH_SCH_TEST values('11','S_04', '11:00', '0725');
insert into DH_SCH_TEST values('12','S_05', '12:00', '0725');
insert into DH_SCH_TEST values('13','S_01', '12:00', '0725');

Delete from userlist where id = 'idTest';


select * from userlist;


//고객 테이블 테스트
CREATE TABLE USERLIST (
CST_ID VARCHAR(15) PRIMARY KEY,
CST_PW VARCHAR(15) NOT NULL,
CST_NAME VARCHAR(20) NOT NULL,
CST_NUM VARCHAR(20) NOT NULL);		


insert into userlist values('idTest','pwTest', 'Song','000');
insert into userlist values('idtest2','pwtest2', 'Song2','111');
insert into userlist values('idTest3','pwTest3', 'Song3','222');

//디자이너 테이블 테스트
CREATE TABLE dsgTest (
DGR_CODE VARCHAR(15) PRIMARY KEY,
DGR_NAME VARCHAR(20) NOT NULL,
DGR_CAR NUMBER(5) NOT NULL,
DGR_PST VARCHAR(15) NOT NULL);

insert into dsgTest values('S_01','노송이',5,'짱');
insert into dsgTest values('S_02','우도희',3,'직원');
insert into dsgTest values('S_03','이시면',2,'직원');
insert into dsgTest values('S_04','김준철',1,'직원');
insert into dsgTest values('S_05','김승현',5,'직원');


//예약 스케줄 테이블 테스트
CREATE TABLE schTEST (
SCH_CODE VARCHAR(10) PRIMARY KEY,
SCH_DCODE VARCHAR(15) NOT NULL,
SCH_TIME VARCHAR(10) NOT NULL,
SCH_DATE VARCHAR(10) NOT NULL,
CONSTRAINT SCH_DCODE_FK2 FOREIGN KEY(SCH_DCODE) REFERENCES dsgTest(DGR_CODE));

insert into schTest values('1','S_01','10:00','1/1');
insert into schTest values('2','S_01','11:00','1/1');
insert into schTest values('3','S_02','10:00','1/1');
insert into schTest values('4','S_02','12:00','1/2');
insert into schTest values('5','S_03','13:00','1/3');

Drop table rsvTest;
Drop table schTest;
//예약 테이블 테스트
CREATE TABLE rsvTest (
RSV_NUM NUMBER(10) PRIMARY KEY,
RSV_DATE VARCHAR(10) NOT NULL,
RSV_GEN VARCHAR(15) NOT NULL,
RSV_COST NUMBER(10) NOT NULL,
RSV_CST_ID VARCHAR(15) NOT NULL,
RSV_SV_NAME VARCHAR(20) NOT NULL,
RSV_SCH_CODE VARCHAR(10) NOT NULL,
CONSTRAINT RSV_CST_ID_FK2 FOREIGN KEY(RSV_CST_ID) REFERENCES USERLIST(CST_ID),
CONSTRAINT RSV_SCH_CODE_FK2 FOREIGN KEY(RSV_SCH_CODE) REFERENCES schTEST(SCH_CODE));

select * from rsvTest;

select rsv_date from rsvTest where rsv_cst_id = 'idTest';
insert into rsvTest values(1, '1/1', '여성', 50000, 'idTest', '파마', '1');
insert into rsvTest values(2, '1/1', '남성', 30000, 'idtest2', '염색', '2');
insert into rsvTest values(3, '1/1', '여성', 50000, 'idtest2', '파마', '3');
insert into rsvTest values(4, '1/2', '남성', 100000, 'idtest3', '커트', '4');
insert into rsvTest values(5, '1/3', '남성', 100000, 'idtest3', '커트', '5');

select * from rsvTest;
select * from schTest;
select * from dsgTest;
select * from DH_SCH_TEST;
select sch_time from schTest where sch_code = (select rsv_sch_code from rsvTest where rsv_cst_id = 'idTest');

select dgr_name from dsgTest where dgr_code = (select sch_dcode from schTest where sch_code = (select rsv_sch_code from rsvTest where rsv_cst_id = 'idTest'));

select rsv_cost from rsvTest where rsv_cst_id = 'idTest';

select cst_name from USERLIST where cst_id =(select rsv_cst_id from rsvTest where rsv_cst_id = 'idTest');
